!function(n){var e={};function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(o,r,function(e){return n[e]}.bind(null,r));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=1)}([function(n,e,t){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t=function(n,e){var t=n[1]||"",o=n[3];if(!o)return t;if(e&&"function"==typeof btoa){var r=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=o.sources.map(function(n){return"/*# sourceURL="+o.sourceRoot+n+" */"});return[t].concat(s).concat([r]).join("\n")}var i;return[t].join("\n")}(e,n);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},e.i=function(n,t){"string"==typeof n&&(n=[[null,n,""]]);for(var o={},r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(r=0;r<n.length;r++){var i=n[r];null!=i[0]&&o[i[0]]||(t&&!i[2]?i[2]=t:t&&(i[2]="("+i[2]+") and ("+t+")"),e.push(i))}},e}},function(n,e,t){t(12),n.exports=t(11)},function(n,e,t){var o=t(3);"string"==typeof o&&(o=[[n.i,o,""]]);var r={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};t(9)(o,r);o.locals&&(n.exports=o.locals)},function(n,e,t){(e=n.exports=t(0)(!1)).i(t(4),""),e.i(t(5),""),e.i(t(8),""),e.push([n.i,"\n",""])},function(n,e,t){(n.exports=t(0)(!1)).push([n.i,"html,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  margin: 0;\n  padding: 0;\n  vertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\nbody {\n  line-height: 1;\n}\nol,\nul {\n  list-style: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n",""])},function(n,e,t){e=n.exports=t(0)(!1);var o=t(6)(t(7));e.push([n.i,"@font-face {\n  font-family: 'Silkscreen';\n  src: url("+o+");\n}\n",""])},function(n,e,t){"use strict";n.exports=function(n,e){return"string"!=typeof n?n:(/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),/["'() \t\n]/.test(n)||e?'"'+n.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':n)}},function(n,e,t){n.exports=t.p+"fonts/slkscr.ttf"},function(n,e,t){(n.exports=t(0)(!1)).push([n.i,".board {\n  border: 2px dashed #000000;\n  display: block;\n  height: 85vh;\n  margin: 0 auto;\n  width: 25vw;\n}\n\n.pixel-font {\n  font-family: 'Silkscreen', sans-serif;\n}\n\n.header {\n  font-size: 4vw;\n  text-align: center;\n}\n\n.sub-header {\n  font-size: 1.8vw;\n  text-align: center;\n}\n\n.guidance {\n  margin-top: 5%;\n}\n\n.score {\n  border-color: black;\n  border-style: dashed;\n  border-width: 2px;\n  margin-right: 5%;\n  width: 30%;\n}\n\n.pixel-btn {\n  background: none;\n  border: none;\n  color: #eee;\n  display: block;\n  font-family: 'Silkscreen', sans-serif;\n  font-size: 3vw;\n  margin: 5% auto;\n  outline: none;\n  padding-bottom: 5px;\n  padding-top: 15px;\n  transition: box-shadow 0.1s, background 0.1s, padding 0.1s;\n}\n\nbutton:active {\n  padding-bottom: 5px;\n  padding-top: 15px;\n  transition: box-shadow 0.1s, background 0.1s, padding 0.1s;\n}\n\n.pixel-btn--active:active {\n  background: #2353e0;\n  box-shadow: 5px 5px #2353e0, 0 5px #2353e0, 0 10px #2353e0, 0 0 #133db9, 0 15px #2979ff,\n    -5px 10px #2a6cda, 5px 10px #2a6cda;\n}\n\n.pixel-btn--active {\n  background: #133db9;\n  box-shadow: 5px 0 #133db9, 0 0 #133db9, 0 5px #133db9, 0 -5px #133db9, 0 15px #2979ff,\n    -5px 10px #2a6cda, 5px 10px #2a6cda;\n}\n\n.pixel-btn--disabled:active {\n  background: #464646;\n  box-shadow: 5px 5px #464646, 0 5px #353535, 0 10px #464646, 0 0 #464646, 0 15px #636363,\n    -5px 10px #464646, 5px 10px #464646;\n}\n\n.pixel-btn--disabled {\n  background: #464646;\n  box-shadow: 5px 0 #464646, 0 0 #353535, 0 5px #464646, 0 -5px #464646, 0 15px #636363,\n    -5px 10px #464646, 5px 10px #464646;\n}\n\n.wrapper {\n  align-items: flex-start;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n}\n",""])},function(n,e,t){var o,r,s={},i=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),a=function(n){var e={};return function(n,t){if("function"==typeof n)return n();if(void 0===e[n]){var o=function(n,e){return e?e.querySelector(n):document.querySelector(n)}.call(this,n,t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(n){o=null}e[n]=o}return e[n]}}(),l=null,c=0,p=[],d=t(10);function u(n,e){for(var t=0;t<n.length;t++){var o=n[t],r=s[o.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](o.parts[i]);for(;i<o.parts.length;i++)r.parts.push(g(o.parts[i],e))}else{var a=[];for(i=0;i<o.parts.length;i++)a.push(g(o.parts[i],e));s[o.id]={id:o.id,refs:1,parts:a}}}}function f(n,e){for(var t=[],o={},r=0;r<n.length;r++){var s=n[r],i=e.base?s[0]+e.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};o[i]?o[i].parts.push(a):t.push(o[i]={id:i,parts:[a]})}return t}function b(n,e){var t=a(n.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=p[p.length-1];if("top"===n.insertAt)o?o.nextSibling?t.insertBefore(e,o.nextSibling):t.appendChild(e):t.insertBefore(e,t.firstChild),p.push(e);else if("bottom"===n.insertAt)t.appendChild(e);else{if("object"!=typeof n.insertAt||!n.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(n.insertAt.before,t);t.insertBefore(e,r)}}function h(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n);var e=p.indexOf(n);e>=0&&p.splice(e,1)}function m(n){var e=document.createElement("style");if(void 0===n.attrs.type&&(n.attrs.type="text/css"),void 0===n.attrs.nonce){var o=function(){0;return t.nc}();o&&(n.attrs.nonce=o)}return v(e,n.attrs),b(n,e),e}function v(n,e){Object.keys(e).forEach(function(t){n.setAttribute(t,e[t])})}function g(n,e){var t,o,r,s;if(e.transform&&n.css){if(!(s="function"==typeof e.transform?e.transform(n.css):e.transform.default(n.css)))return function(){};n.css=s}if(e.singleton){var i=c++;t=l||(l=m(e)),o=w.bind(null,t,i,!1),r=w.bind(null,t,i,!0)}else n.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(n){var e=document.createElement("link");return void 0===n.attrs.type&&(n.attrs.type="text/css"),n.attrs.rel="stylesheet",v(e,n.attrs),b(n,e),e}(e),o=function(n,e,t){var o=t.css,r=t.sourceMap,s=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||s)&&(o=d(o));r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([o],{type:"text/css"}),a=n.href;n.href=URL.createObjectURL(i),a&&URL.revokeObjectURL(a)}.bind(null,t,e),r=function(){h(t),t.href&&URL.revokeObjectURL(t.href)}):(t=m(e),o=function(n,e){var t=e.css,o=e.media;o&&n.setAttribute("media",o);if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}.bind(null,t),r=function(){h(t)});return o(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;o(n=e)}else r()}}n.exports=function(n,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var t=f(n,e);return u(t,e),function(n){for(var o=[],r=0;r<t.length;r++){var i=t[r];(a=s[i.id]).refs--,o.push(a)}n&&u(f(n,e),e);for(r=0;r<o.length;r++){var a;if(0===(a=o[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete s[a.id]}}}};var x,y=(x=[],function(n,e){return x[n]=e,x.filter(Boolean).join("\n")});function w(n,e,t,o){var r=t?"":o.css;if(n.styleSheet)n.styleSheet.cssText=y(e,r);else{var s=document.createTextNode(r),i=n.childNodes;i[e]&&n.removeChild(i[e]),i.length?n.insertBefore(s,i[e]):n.appendChild(s)}}},function(n,e){n.exports=function(n){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!n||"string"!=typeof n)return n;var t=e.protocol+"//"+e.host,o=t+e.pathname.replace(/\/[^\/]*$/,"/");return n.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(n,e){var r,s=e.trim().replace(/^"(.*)"$/,function(n,e){return e}).replace(/^'(.*)'$/,function(n,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?n:(r=0===s.indexOf("//")?s:0===s.indexOf("/")?t+s:o+s.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(n,e){n.exports='<!doctype html> <html lang=en> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"/> <title>Tetris</title> <meta name=description content="Yet another Tetris remake in pure JS."/> <meta name=viewport content="width=device-width,initial-scale=1"/> </head> <body> <div class=wrapper> <div class=score> <h1 class="header pixel-font">Tetris</h1> <h1 class="sub-header pixel-font">Yet another Tetris remake in pure JS.</h1> <div class=guidance> <p class="sub-header pixel-font">&#9644; (SPACE) - Drop block</p> <p class="sub-header pixel-font">&#9654; (RIGHT) - Move right</p> <p class="sub-header pixel-font">&#9664; (LEFT) - Move left</p> <p class="sub-header pixel-font">&#9650; (UP) - Rotate</p> <p class="sub-header pixel-font">&#9660; (DOWN) - Speed up</p> <p class="sub-header pixel-font">(ESC) - Pause</p> </div> <div id=score> <p class="sub-header pixel-font">Score</p> <p class="sub-header pixel-font" id=score-display></p> </div> <div> <button class="pixel-btn pixel-btn--active" id=btn-start>Start</button> <button class="pixel-btn pixel-btn--disabled" id=btn-pause>Pause</button> <button class="pixel-btn pixel-btn--disabled" id=btn-restart>Restart</button> </div> </div> <div class=game> <canvas class=board id=board>Your browser does not support HTML5 :(</canvas> </div> </div> </body> </html> '},function(n,e,t){"use strict";t.r(e);t(2);const o=document.getElementById("board"),{clientWidth:r,clientHeight:s}=o,i=r/10,a=s/20,l=[{shape:"i",blocks:[3840,8738,240,17476],color:"#46dccd"},{shape:"j",blocks:[17600,36352,25664,3616],color:"#024aca"},{shape:"l",blocks:[17504,3712,50240,11776],color:"#f7872a"},{shape:"o",blocks:[52224,52224,52224,52224],color:"#ffbb31"},{shape:"s",blocks:[1728,35904,27648,17952],color:"#5cac48"},{shape:"t",blocks:[3648,19520,19968,17984],color:"#7b3781"},{shape:"z",blocks:[3168,19584,50688,9792],color:"#e03c28"}];let c=[...l];const p=(n,e,t,o="black")=>{n.fillStyle=o,n.lineWidth=1,n.stroke(),n.fillRect(i*e,a*t,i,a),n.strokeRect(i*e,a*t,i,a)},d=n=>{let e=-1,t=-1;const o=[];for(let r=32768;r>0;r>>=1)4==++e&&(++t,e=0),r&n&&o.push({row:e,col:t});return o},u=n=>{const e=d(n.block);return Math.max(...e.map(n=>n.row))-Math.min(...e.map(n=>n.row))+1},f=(n,e)=>{const{posX:t}=n;return((n,e)=>{const{posX:t,posY:o,block:r}=n,s=d(r);for(let n=0;n<s.length;n++){const{row:r,col:i}=s[n];if(e.find(n=>n.posX===i+t-1&&n.posY===r+o+1)||i+t-1<0)return!1}return!0})(n,e)?t-1:t},b=(n,e)=>{const{posX:t}=n;return((n,e)=>{const{posX:t,posY:o,block:r}=n,s=d(r);for(let n=0;n<s.length;n++){const{row:r,col:i}=s[n];if(e.find(n=>n.posX===i+t+1&&n.posY===r+o+1)||i+t+1>=10)return!1}return!0})(n,e)?t+1:t},h=(n,e)=>{const{posY:t}=n;return((n,e)=>{const{posX:t,posY:o,block:r}=n,s=d(r);for(let r=0;r<s.length;r++){const{row:i,col:a}=s[r];if(e.find(n=>n.posX===a+t+1&&n.posY===i+o+2)||i+o+u(n)>=20)return!1}return!0})(n,e)?t+1:t},m=(n,e)=>{const{block:t,tetromino:o}=n,r=o.blocks[(o.blocks.indexOf(t)+1)%o.blocks.length];return((n,e,t)=>{const{posX:o,posY:r}=n,s=d(e);for(let n=0;n<s.length;n++){const{row:e,col:i}=s[n];if(t.find(n=>n.posX===i+o&&n.posY===e+r)||i+o>=10||i+o<0)return!1}return!0})(n,r,e)?r:t},v=n=>{const e=n;for(let n=0;n<e.length;n++)e[n].posY++;return e},g=(n,e)=>{let t=[...e];for(let n=0;n<20;n++){if(10===t.filter(e=>e.posY===n).length){const e=(t=t.filter(e=>e.posY!==n)).filter(e=>e.posY<n);v(e)}}return t};var x=()=>(new Date).getTime();const y=document.getElementById("board"),w=y.getContext("2d"),k={paused:!0,score:0,frameTime:0},S=[],T={posX:4,posY:-4,landed:!1,tetromino:null,block:null},Y=()=>{S.length=0},E=()=>{w.clearRect(0,0,y.width,y.height),((n,e)=>{for(let t=0;t<e.length;t++){const o=e[t];p(n,o.posX,o.posY,o.tetromino.color)}})(w,S),((n,e,t,o,r="black")=>{d(o).forEach(({row:o,col:s})=>{p(n,s+e,o+t,r)})})(w,T.posX,T.posY,T.block,T.tetromino.color)},j=()=>{T.landed=!1,T.tetromino=(()=>{c.length||(c=[...l]);const n=Math.floor(Math.random()*c.length),e=c[n];return c.splice(n,1),e})(),T.posY=-4,T.posX=4;const[[n]]=[T.tetromino.blocks];T.block=n},M=()=>{const n=[...S],e=[...g(0,S)];S.splice(0,S.length,...e),((n,e)=>{const t=(n.length-e.length)/10;k.score+=t>1?4*t:t,document.getElementById("score-display").innerText=k.score})(n,e)},L=n=>{k.frameTime+=n,k.frameTime>=.15&&(((n,e)=>{const{posX:t,posY:o,block:r}=n,s=d(r);for(let n=0;n<s.length;n++){const{row:r,col:i}=s[n];if(e.find(n=>n.posX===i+t&&n.posY===r+o+1)||r+o+1>=20)return!0}return!1})(T,S)?(d(T.block).forEach(({row:n,col:e})=>{S.push({tetromino:T.tetromino,posX:T.posX+e,posY:T.posY+n})}),T.landed=!0,T.tetromino=null,M()):T.posY++,T.tetromino||j(),E(),((n,e)=>Math.min(...e.map(n=>n.posY))<=0)(0,S)&&(k.paused=!0,((n,e,t="black")=>{n.fillStyle=t,n.font="3em 'Silkscreen', sans-serif",n.textAlign="center",n.fillText(e,r/2,s/2)})(w,"Game Over!")),k.frameTime=0)},R=()=>{let n=x(),e=x();const t=()=>{e=x(),k.paused||L(Math.min(1,(e-n)/1e3)),n=e,(()=>window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){window.setTimeout(n,500)})()(t)};t()};document.getElementById("btn-start").addEventListener("click",n=>{n.preventDefault(),n.target.blur(),k.paused=!1}),document.getElementById("btn-pause").addEventListener("click",n=>{n.preventDefault(),n.target.blur(),k.paused=!0}),document.getElementById("btn-restart").addEventListener("click",n=>{n.preventDefault(),n.target.blur(),Y(),j(),k.score=0,k.paused=!1,k.frameTime=0}),window.addEventListener("load",()=>{Y(),y.width=r,y.height=s,R()}),window.addEventListener("keydown",n=>{const{paused:e}=k;if(!e)switch(n.keyCode){case 37:T.posX=f(T,S);break;case 39:T.posX=b(T,S);break;case 40:T.posY=h(T,S);break;case 38:T.block=m(T,S);break;case 32:T.posY=((n,e)=>{const t=d(n.block).map(n=>n.col).filter((n,e,t)=>t.indexOf(n)===e).map(e=>e+n.posX),o=e.filter(n=>t.includes(n.posX));return Math.min(...o.map(n=>n.posY),19)-u(n)-1})(T,S);break;case 27:k.paused=!k.paused}})}]);